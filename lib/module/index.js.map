{"version":3,"names":["NativeEventEmitter","NativeModules","Platform","NativeRealtimeAudioAnalyzer","LINKING_ERROR","select","ios","default","legacyCandidateNames","getLegacyModule","name","m","turboModule","legacyModule","RealtimeAudioAnalysisModule","console","error","Object","keys","filter","key","includes","Error","eventEmitter","RealtimeAudioAnalyzer","startAnalysis","config","stopAnalysis","isAnalyzing","getAnalysisConfig","start","_RealtimeAudioAnalysi","fn","stop","_RealtimeAudioAnalysi2","isRunning","_RealtimeAudioAnalysi3","addListener","bind","removeListeners","removeAllListeners","removeSubscription","subscription","remove"],"sources":["index.ts"],"sourcesContent":["import { NativeEventEmitter, NativeModules, Platform } from 'react-native';\nimport NativeRealtimeAudioAnalyzer, {\n  type AnalysisConfig,\n  type Spec as TurboSpec,\n} from './NativeRealtimeAudioAnalyzer';\n\nconst LINKING_ERROR =\n  `The package 'react-native-realtime-audio-analysis' doesn't seem to be linked. Make sure:\\n\\n` +\n  Platform.select({ ios: \"- You have run 'cd ios && pod install'\\n\", default: '' }) +\n  '- You rebuilt the app after installing the package\\n' +\n  '- You are not using Expo Go\\n';\n\nconst legacyCandidateNames = [\n  'RealtimeAudioAnalyzer', // expected (matches getName())\n  'RealtimeAudioAnalyzerModule', // occasional legacy naming\n] as const;\n\nfunction getLegacyModule(): any | null {\n  for (const name of legacyCandidateNames) {\n    const m = (NativeModules as any)[name];\n    if (m) return m;\n  }\n  return null;\n}\n\n// Turbo module can be null until Android is truly Turbo-registered\nconst turboModule: TurboSpec | null = (NativeRealtimeAudioAnalyzer ?? null) as TurboSpec | null;\nconst legacyModule: any | null = getLegacyModule();\n\n// Prefer turbo when available, otherwise legacy\nconst RealtimeAudioAnalysisModule: any | null = turboModule ?? legacyModule;\n\nif (!RealtimeAudioAnalysisModule) {\n  console.error(\n    'Available NativeModules:',\n    Object.keys(NativeModules).filter(\n      (key) =>\n        key.includes('Audio') ||\n        key.includes('Realtime') ||\n        key.includes('Platform') ||\n        key.includes('Constants')\n    )\n  );\n  throw new Error(LINKING_ERROR);\n}\n\nexport type { AnalysisConfig };\n\nexport interface AudioAnalysisEvent {\n  frequencyData: number[];\n  timeData: number[];\n  volume: number;\n  peak: number;\n  timestamp: number;\n  rms?: number;\n  fft?: number[];\n}\n\nconst eventEmitter = new NativeEventEmitter(RealtimeAudioAnalysisModule);\n\nconst RealtimeAudioAnalyzer = {\n  // Core methods\n  startAnalysis(config: AnalysisConfig = {}): Promise<void> {\n    return RealtimeAudioAnalysisModule.startAnalysis(config);\n  },\n\n  stopAnalysis(): Promise<void> {\n    return RealtimeAudioAnalysisModule.stopAnalysis();\n  },\n\n  isAnalyzing(): Promise<boolean> {\n    return RealtimeAudioAnalysisModule.isAnalyzing();\n  },\n\n  getAnalysisConfig(): Promise<AnalysisConfig> {\n    return RealtimeAudioAnalysisModule.getAnalysisConfig();\n  },\n\n  // Backward-compatible aliases\n  start(config: AnalysisConfig = {}): Promise<void> {\n    const fn = RealtimeAudioAnalysisModule.start ?? RealtimeAudioAnalysisModule.startAnalysis;\n    return fn(config);\n  },\n\n  stop(): Promise<void> {\n    const fn = RealtimeAudioAnalysisModule.stop ?? RealtimeAudioAnalysisModule.stopAnalysis;\n    return fn();\n  },\n\n  isRunning(): Promise<boolean> {\n    const fn = RealtimeAudioAnalysisModule.isRunning ?? RealtimeAudioAnalysisModule.isAnalyzing;\n    return fn();\n  },\n\n  // Event emitter API\n  addListener: eventEmitter.addListener.bind(eventEmitter),\n  removeListeners: eventEmitter.removeAllListeners.bind(eventEmitter),\n  removeSubscription: (subscription: any) => subscription.remove(),\n};\n\nexport default RealtimeAudioAnalyzer;"],"mappings":"AAAA,SAASA,kBAAkB,EAAEC,aAAa,EAAEC,QAAQ,QAAQ,cAAc;AAC1E,OAAOC,2BAA2B,MAG3B,+BAA+B;AAEtC,MAAMC,aAAa,GACjB,8FAA8F,GAC9FF,QAAQ,CAACG,MAAM,CAAC;EAAEC,GAAG,EAAE,0CAA0C;EAAEC,OAAO,EAAE;AAAG,CAAC,CAAC,GACjF,sDAAsD,GACtD,+BAA+B;AAEjC,MAAMC,oBAAoB,GAAG,CAC3B,uBAAuB;AAAE;AACzB,6BAA6B,CAAE;AAAA,CACvB;AAEV,SAASC,eAAeA,CAAA,EAAe;EACrC,KAAK,MAAMC,IAAI,IAAIF,oBAAoB,EAAE;IACvC,MAAMG,CAAC,GAAIV,aAAa,CAASS,IAAI,CAAC;IACtC,IAAIC,CAAC,EAAE,OAAOA,CAAC;EACjB;EACA,OAAO,IAAI;AACb;;AAEA;AACA,MAAMC,WAA6B,GAAIT,2BAA2B,aAA3BA,2BAA2B,cAA3BA,2BAA2B,GAAI,IAAyB;AAC/F,MAAMU,YAAwB,GAAGJ,eAAe,CAAC,CAAC;;AAElD;AACA,MAAMK,2BAAuC,GAAGF,WAAW,aAAXA,WAAW,cAAXA,WAAW,GAAIC,YAAY;AAE3E,IAAI,CAACC,2BAA2B,EAAE;EAChCC,OAAO,CAACC,KAAK,CACX,0BAA0B,EAC1BC,MAAM,CAACC,IAAI,CAACjB,aAAa,CAAC,CAACkB,MAAM,CAC9BC,GAAG,IACFA,GAAG,CAACC,QAAQ,CAAC,OAAO,CAAC,IACrBD,GAAG,CAACC,QAAQ,CAAC,UAAU,CAAC,IACxBD,GAAG,CAACC,QAAQ,CAAC,UAAU,CAAC,IACxBD,GAAG,CAACC,QAAQ,CAAC,WAAW,CAC5B,CACF,CAAC;EACD,MAAM,IAAIC,KAAK,CAAClB,aAAa,CAAC;AAChC;AAcA,MAAMmB,YAAY,GAAG,IAAIvB,kBAAkB,CAACc,2BAA2B,CAAC;AAExE,MAAMU,qBAAqB,GAAG;EAC5B;EACAC,aAAaA,CAACC,MAAsB,GAAG,CAAC,CAAC,EAAiB;IACxD,OAAOZ,2BAA2B,CAACW,aAAa,CAACC,MAAM,CAAC;EAC1D,CAAC;EAEDC,YAAYA,CAAA,EAAkB;IAC5B,OAAOb,2BAA2B,CAACa,YAAY,CAAC,CAAC;EACnD,CAAC;EAEDC,WAAWA,CAAA,EAAqB;IAC9B,OAAOd,2BAA2B,CAACc,WAAW,CAAC,CAAC;EAClD,CAAC;EAEDC,iBAAiBA,CAAA,EAA4B;IAC3C,OAAOf,2BAA2B,CAACe,iBAAiB,CAAC,CAAC;EACxD,CAAC;EAED;EACAC,KAAKA,CAACJ,MAAsB,GAAG,CAAC,CAAC,EAAiB;IAAA,IAAAK,qBAAA;IAChD,MAAMC,EAAE,IAAAD,qBAAA,GAAGjB,2BAA2B,CAACgB,KAAK,cAAAC,qBAAA,cAAAA,qBAAA,GAAIjB,2BAA2B,CAACW,aAAa;IACzF,OAAOO,EAAE,CAACN,MAAM,CAAC;EACnB,CAAC;EAEDO,IAAIA,CAAA,EAAkB;IAAA,IAAAC,sBAAA;IACpB,MAAMF,EAAE,IAAAE,sBAAA,GAAGpB,2BAA2B,CAACmB,IAAI,cAAAC,sBAAA,cAAAA,sBAAA,GAAIpB,2BAA2B,CAACa,YAAY;IACvF,OAAOK,EAAE,CAAC,CAAC;EACb,CAAC;EAEDG,SAASA,CAAA,EAAqB;IAAA,IAAAC,sBAAA;IAC5B,MAAMJ,EAAE,IAAAI,sBAAA,GAAGtB,2BAA2B,CAACqB,SAAS,cAAAC,sBAAA,cAAAA,sBAAA,GAAItB,2BAA2B,CAACc,WAAW;IAC3F,OAAOI,EAAE,CAAC,CAAC;EACb,CAAC;EAED;EACAK,WAAW,EAAEd,YAAY,CAACc,WAAW,CAACC,IAAI,CAACf,YAAY,CAAC;EACxDgB,eAAe,EAAEhB,YAAY,CAACiB,kBAAkB,CAACF,IAAI,CAACf,YAAY,CAAC;EACnEkB,kBAAkB,EAAGC,YAAiB,IAAKA,YAAY,CAACC,MAAM,CAAC;AACjE,CAAC;AAED,eAAenB,qBAAqB","ignoreList":[]}
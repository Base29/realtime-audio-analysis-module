{"version":3,"names":["fs","path","AndroidConfigManager","configureMainApplication","projectRoot","moduleConfig","mainAppPath","findMainApplicationFile","success","message","error","isKotlin","endsWith","content","readFileSync","isAlreadyConfigured","modifiedFiles","modifiedContent","modifyMainApplicationContent","backupPath","writeFileSync","basename","Error","String","androidAppPath","join","existsSync","findMainApp","dir","files","readdirSync","file","filePath","stat","statSync","isDirectory","result","importPattern","RegExp","packageName","className","packagePattern","test","addImportStatement","addPackageToGetPackages","_isKotlin","importStatement","importRegex","imports","match","length","lastImport","lastImportIndex","lastIndexOf","insertIndex","slice","packageRegex","packageMatch","packageIndex","indexOf","getPackagesRegex","packagesContent","trim","packageInstance","replacement","replace","alternativeRegex","altMatch","configureBuildFiles","settingsResult","configureSettingsGradle","push","buildResult","configureAppBuildGradle","settingsPath","projectName","name","includes","androidDir","relativePath","relative","modulePath","includeStatement","projectStatement","buildGradlePath","dependencyStatement","dependenciesRegex","dependenciesContent","newDependenciesContent","manager"],"sources":["android-config.js"],"sourcesContent":["import * as fs from 'fs';\nimport * as path from 'path';\nexport class AndroidConfigManager {\n    /**\n     * Configures MainApplication file to register the native module package\n     */\n    configureMainApplication(projectRoot, moduleConfig) {\n        try {\n            const mainAppPath = this.findMainApplicationFile(projectRoot);\n            if (!mainAppPath) {\n                return {\n                    success: false,\n                    message: 'MainApplication file not found',\n                    error: 'Could not locate MainApplication.kt or MainApplication.java file'\n                };\n            }\n            const isKotlin = mainAppPath.endsWith('.kt');\n            const content = fs.readFileSync(mainAppPath, 'utf8');\n            // Check if already configured\n            if (this.isAlreadyConfigured(content, moduleConfig)) {\n                return {\n                    success: true,\n                    message: 'MainApplication already configured',\n                    modifiedFiles: []\n                };\n            }\n            const modifiedContent = this.modifyMainApplicationContent(content, moduleConfig, isKotlin);\n            // Create backup\n            const backupPath = `${mainAppPath}.backup`;\n            fs.writeFileSync(backupPath, content);\n            // Write modified content\n            fs.writeFileSync(mainAppPath, modifiedContent);\n            return {\n                success: true,\n                message: `Successfully configured ${path.basename(mainAppPath)}`,\n                modifiedFiles: [mainAppPath]\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                message: 'Failed to configure MainApplication',\n                error: error instanceof Error ? error.message : String(error)\n            };\n        }\n    }\n    /**\n     * Finds the MainApplication file in the Android project\n     */\n    findMainApplicationFile(projectRoot) {\n        const androidAppPath = path.join(projectRoot, 'android', 'app', 'src', 'main', 'java');\n        if (!fs.existsSync(androidAppPath)) {\n            return null;\n        }\n        // Recursively search for MainApplication files\n        const findMainApp = (dir) => {\n            const files = fs.readdirSync(dir);\n            for (const file of files) {\n                const filePath = path.join(dir, file);\n                const stat = fs.statSync(filePath);\n                if (stat.isDirectory()) {\n                    const result = findMainApp(filePath);\n                    if (result)\n                        return result;\n                }\n                else if (file === 'MainApplication.kt' || file === 'MainApplication.java') {\n                    return filePath;\n                }\n            }\n            return null;\n        };\n        return findMainApp(androidAppPath);\n    }\n    /**\n     * Checks if the MainApplication is already configured with the module\n     */\n    isAlreadyConfigured(content, moduleConfig) {\n        const importPattern = new RegExp(`import\\\\s+${moduleConfig.packageName}\\\\.${moduleConfig.className}`);\n        const packagePattern = new RegExp(`${moduleConfig.className}\\\\(\\\\)`);\n        return importPattern.test(content) && packagePattern.test(content);\n    }\n    /**\n     * Modifies the MainApplication content to include the module\n     */\n    modifyMainApplicationContent(content, moduleConfig, isKotlin) {\n        let modifiedContent = content;\n        // Add import statement\n        modifiedContent = this.addImportStatement(modifiedContent, moduleConfig, isKotlin);\n        // Add package to getPackages method\n        modifiedContent = this.addPackageToGetPackages(modifiedContent, moduleConfig, isKotlin);\n        return modifiedContent;\n    }\n    /**\n     * Adds the import statement for the module package\n     */\n    addImportStatement(content, moduleConfig, _isKotlin) {\n        const importStatement = `import ${moduleConfig.packageName}.${moduleConfig.className}`;\n        // Find the last import statement\n        const importRegex = /import\\s+[^;]+[;\\n]/g;\n        const imports = content.match(importRegex);\n        if (imports && imports.length > 0) {\n            const lastImport = imports[imports.length - 1];\n            const lastImportIndex = content.lastIndexOf(lastImport);\n            const insertIndex = lastImportIndex + lastImport.length;\n            return content.slice(0, insertIndex) +\n                importStatement + '\\n' +\n                content.slice(insertIndex);\n        }\n        else {\n            // If no imports found, add after package declaration\n            const packageRegex = /package\\s+[^;]+[;\\n]/;\n            const packageMatch = content.match(packageRegex);\n            if (packageMatch) {\n                const packageIndex = content.indexOf(packageMatch[0]) + packageMatch[0].length;\n                return content.slice(0, packageIndex) +\n                    '\\n' + importStatement + '\\n' +\n                    content.slice(packageIndex);\n            }\n        }\n        return content;\n    }\n    /**\n     * Adds the package to the getPackages method\n     */\n    addPackageToGetPackages(content, moduleConfig, _isKotlin) {\n        // Find the getPackages method\n        const getPackagesRegex = /override\\s+fun\\s+getPackages\\(\\)[\\s\\S]*?return\\s+Arrays\\.asList\\(([\\s\\S]*?)\\)/;\n        const match = content.match(getPackagesRegex);\n        if (match) {\n            const packagesContent = match[1].trim();\n            const packageInstance = `${moduleConfig.className}()`;\n            // Check if packages list is empty or has content\n            if (packagesContent === '') {\n                // Empty list\n                const replacement = match[0].replace(/return\\s+Arrays\\.asList\\(\\s*\\)/, `return Arrays.asList(\\n        ${packageInstance}\\n      )`);\n                return content.replace(match[0], replacement);\n            }\n            else {\n                // Add to existing list\n                const replacement = match[0].replace(packagesContent, `${packagesContent},\\n        ${packageInstance}`);\n                return content.replace(match[0], replacement);\n            }\n        }\n        // If getPackages method not found in expected format, try alternative patterns\n        const alternativeRegex = /getPackages\\(\\)[\\s\\S]*?return\\s+Arrays\\.asList\\(([\\s\\S]*?)\\)/;\n        const altMatch = content.match(alternativeRegex);\n        if (altMatch) {\n            const packagesContent = altMatch[1].trim();\n            const packageInstance = `${moduleConfig.className}()`;\n            if (packagesContent === '') {\n                const replacement = altMatch[0].replace(/return\\s+Arrays\\.asList\\(\\s*\\)/, `return Arrays.asList(\\n        ${packageInstance}\\n      )`);\n                return content.replace(altMatch[0], replacement);\n            }\n            else {\n                const replacement = altMatch[0].replace(packagesContent, `${packagesContent},\\n        ${packageInstance}`);\n                return content.replace(altMatch[0], replacement);\n            }\n        }\n        return content;\n    }\n    /**\n     * Configures Android build files (settings.gradle and app/build.gradle)\n     */\n    configureBuildFiles(projectRoot, moduleConfig) {\n        try {\n            const modifiedFiles = [];\n            // Configure settings.gradle\n            const settingsResult = this.configureSettingsGradle(projectRoot, moduleConfig);\n            if (!settingsResult.success) {\n                return settingsResult;\n            }\n            if (settingsResult.modifiedFiles) {\n                modifiedFiles.push(...settingsResult.modifiedFiles);\n            }\n            // Configure app/build.gradle\n            const buildResult = this.configureAppBuildGradle(projectRoot, moduleConfig);\n            if (!buildResult.success) {\n                return buildResult;\n            }\n            if (buildResult.modifiedFiles) {\n                modifiedFiles.push(...buildResult.modifiedFiles);\n            }\n            return {\n                success: true,\n                message: 'Successfully configured Android build files',\n                modifiedFiles\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                message: 'Failed to configure Android build files',\n                error: error instanceof Error ? error.message : String(error)\n            };\n        }\n    }\n    /**\n     * Configures settings.gradle to include the module project\n     */\n    configureSettingsGradle(projectRoot, moduleConfig) {\n        const settingsPath = path.join(projectRoot, 'android', 'settings.gradle');\n        if (!fs.existsSync(settingsPath)) {\n            return {\n                success: false,\n                message: 'settings.gradle not found',\n                error: `File not found: ${settingsPath}`\n            };\n        }\n        const content = fs.readFileSync(settingsPath, 'utf8');\n        const projectName = `:${moduleConfig.name}`;\n        // Check if already configured\n        if (content.includes(projectName)) {\n            return {\n                success: true,\n                message: 'settings.gradle already configured',\n                modifiedFiles: []\n            };\n        }\n        // Calculate relative path from android directory to module\n        const androidDir = path.join(projectRoot, 'android');\n        const relativePath = path.relative(androidDir, path.join(moduleConfig.modulePath, 'android'));\n        // Add project inclusion\n        const includeStatement = `include '${projectName}'`;\n        const projectStatement = `project('${projectName}').projectDir = new File('${relativePath}')`;\n        const modifiedContent = content + '\\n' + includeStatement + '\\n' + projectStatement + '\\n';\n        // Create backup\n        const backupPath = `${settingsPath}.backup`;\n        fs.writeFileSync(backupPath, content);\n        // Write modified content\n        fs.writeFileSync(settingsPath, modifiedContent);\n        return {\n            success: true,\n            message: 'Successfully configured settings.gradle',\n            modifiedFiles: [settingsPath]\n        };\n    }\n    /**\n     * Configures app/build.gradle to add the module dependency\n     */\n    configureAppBuildGradle(projectRoot, moduleConfig) {\n        const buildGradlePath = path.join(projectRoot, 'android', 'app', 'build.gradle');\n        if (!fs.existsSync(buildGradlePath)) {\n            return {\n                success: false,\n                message: 'app/build.gradle not found',\n                error: `File not found: ${buildGradlePath}`\n            };\n        }\n        const content = fs.readFileSync(buildGradlePath, 'utf8');\n        const projectName = `:${moduleConfig.name}`;\n        const dependencyStatement = `implementation project('${projectName}')`;\n        // Check if already configured\n        if (content.includes(dependencyStatement)) {\n            return {\n                success: true,\n                message: 'app/build.gradle already configured',\n                modifiedFiles: []\n            };\n        }\n        // Find dependencies block\n        const dependenciesRegex = /dependencies\\s*\\{([\\s\\S]*?)\\n\\}/;\n        const match = content.match(dependenciesRegex);\n        if (!match) {\n            return {\n                success: false,\n                message: 'Dependencies block not found in app/build.gradle',\n                error: 'Could not locate dependencies block'\n            };\n        }\n        // Add dependency to the dependencies block\n        const dependenciesContent = match[1];\n        const newDependenciesContent = dependenciesContent + `\\n    ${dependencyStatement}`;\n        const modifiedContent = content.replace(match[0], `dependencies {${newDependenciesContent}\\n}`);\n        // Create backup\n        const backupPath = `${buildGradlePath}.backup`;\n        fs.writeFileSync(backupPath, content);\n        // Write modified content\n        fs.writeFileSync(buildGradlePath, modifiedContent);\n        return {\n            success: true,\n            message: 'Successfully configured app/build.gradle',\n            modifiedFiles: [buildGradlePath]\n        };\n    }\n}\n/**\n * Convenience function to configure MainApplication\n */\nexport function configureMainApplication(projectRoot, moduleConfig) {\n    const manager = new AndroidConfigManager();\n    return manager.configureMainApplication(projectRoot, moduleConfig);\n}\n/**\n * Convenience function to configure Android build files\n */\nexport function configureBuildFiles(projectRoot, moduleConfig) {\n    const manager = new AndroidConfigManager();\n    return manager.configureBuildFiles(projectRoot, moduleConfig);\n}\n"],"mappings":"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","ignoreList":[]}
{"version":3,"names":["_reactNative","require","_NativeRealtimeAudioAnalyzer","_interopRequireDefault","e","__esModule","default","LINKING_ERROR","Platform","select","ios","legacyCandidateNames","getLegacyModule","name","m","NativeModules","turboModule","NativeRealtimeAudioAnalyzer","legacyModule","RealtimeAudioAnalysisModule","console","error","Object","keys","filter","key","includes","Error","eventEmitter","NativeEventEmitter","RealtimeAudioAnalyzer","startAnalysis","config","stopAnalysis","isAnalyzing","getAnalysisConfig","start","_RealtimeAudioAnalysi","fn","stop","_RealtimeAudioAnalysi2","isRunning","_RealtimeAudioAnalysi3","addListener","bind","removeListeners","removeAllListeners","removeSubscription","subscription","remove","_default","exports"],"sources":["index.ts"],"sourcesContent":["import { NativeEventEmitter, NativeModules, Platform } from 'react-native';\nimport NativeRealtimeAudioAnalyzer, {\n  type AnalysisConfig,\n  type Spec as TurboSpec,\n} from './NativeRealtimeAudioAnalyzer';\n\nconst LINKING_ERROR =\n  `The package 'react-native-realtime-audio-analysis' doesn't seem to be linked. Make sure:\\n\\n` +\n  Platform.select({ ios: \"- You have run 'cd ios && pod install'\\n\", default: '' }) +\n  '- You rebuilt the app after installing the package\\n' +\n  '- You are not using Expo Go\\n';\n\nconst legacyCandidateNames = [\n  'RealtimeAudioAnalyzer', // expected (matches getName())\n  'RealtimeAudioAnalyzerModule', // occasional legacy naming\n] as const;\n\nfunction getLegacyModule(): any | null {\n  for (const name of legacyCandidateNames) {\n    const m = (NativeModules as any)[name];\n    if (m) return m;\n  }\n  return null;\n}\n\n// Turbo module can be null until Android is truly Turbo-registered\nconst turboModule: TurboSpec | null = (NativeRealtimeAudioAnalyzer ?? null) as TurboSpec | null;\nconst legacyModule: any | null = getLegacyModule();\n\n// Prefer turbo when available, otherwise legacy\nconst RealtimeAudioAnalysisModule: any | null = turboModule ?? legacyModule;\n\nif (!RealtimeAudioAnalysisModule) {\n  console.error(\n    'Available NativeModules:',\n    Object.keys(NativeModules).filter(\n      (key) =>\n        key.includes('Audio') ||\n        key.includes('Realtime') ||\n        key.includes('Platform') ||\n        key.includes('Constants')\n    )\n  );\n  throw new Error(LINKING_ERROR);\n}\n\nexport type { AnalysisConfig };\n\nexport interface AudioAnalysisEvent {\n  frequencyData: number[];\n  timeData: number[];\n  volume: number;\n  peak: number;\n  timestamp: number;\n  rms?: number;\n  fft?: number[];\n}\n\nconst eventEmitter = new NativeEventEmitter(RealtimeAudioAnalysisModule);\n\nconst RealtimeAudioAnalyzer = {\n  // Core methods\n  startAnalysis(config: AnalysisConfig = {}): Promise<void> {\n    return RealtimeAudioAnalysisModule.startAnalysis(config);\n  },\n\n  stopAnalysis(): Promise<void> {\n    return RealtimeAudioAnalysisModule.stopAnalysis();\n  },\n\n  isAnalyzing(): Promise<boolean> {\n    return RealtimeAudioAnalysisModule.isAnalyzing();\n  },\n\n  getAnalysisConfig(): Promise<AnalysisConfig> {\n    return RealtimeAudioAnalysisModule.getAnalysisConfig();\n  },\n\n  // Backward-compatible aliases\n  start(config: AnalysisConfig = {}): Promise<void> {\n    const fn = RealtimeAudioAnalysisModule.start ?? RealtimeAudioAnalysisModule.startAnalysis;\n    return fn(config);\n  },\n\n  stop(): Promise<void> {\n    const fn = RealtimeAudioAnalysisModule.stop ?? RealtimeAudioAnalysisModule.stopAnalysis;\n    return fn();\n  },\n\n  isRunning(): Promise<boolean> {\n    const fn = RealtimeAudioAnalysisModule.isRunning ?? RealtimeAudioAnalysisModule.isAnalyzing;\n    return fn();\n  },\n\n  // Event emitter API\n  addListener: eventEmitter.addListener.bind(eventEmitter),\n  removeListeners: eventEmitter.removeAllListeners.bind(eventEmitter),\n  removeSubscription: (subscription: any) => subscription.remove(),\n};\n\nexport default RealtimeAudioAnalyzer;"],"mappings":"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","ignoreList":[]}
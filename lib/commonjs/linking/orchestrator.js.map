{"version":3,"names":["fs","_interopRequireWildcard","require","_pathResolver","_androidConfig","_iosConfig","_verification","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_defineProperty","_toPropertyKey","value","enumerable","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","LinkingLogger","constructor","setVerbose","verbose","info","message","console","log","success","warn","error","debug","ReactNativeModuleLinkingOrchestrator","pathResolver","PathResolver","androidManager","AndroidConfigManager","iosManager","IOSConfigManager","verifier","ModuleLinkingVerifier","logger","linkModule","options","startTime","Date","now","rollbackInfo","backupFiles","Map","createdFiles","timestamp","errors","warnings","modifiedFiles","moduleResolution","resolveModuleConfiguration","moduleConfig","createFailureResult","moduleResolved","androidConfigured","iosConfigured","verificationPassed","rollbackAvailable","name","modulePath","platform","targetPlatforms","determinePlatforms","join","includes","androidResult","configureAndroidPlatform","push","length","performRollback","iosResult","configureIOSPlatform","skipVerification","verificationResult","performVerification","duration","forEach","file","overallSuccess","filter","_","details","undefined","Error","backupFile","originalFile","existsSync","copyFileSync","unlinkSync","errorMsg","createdFile","pathResult","resolveModulePath","projectRoot","detectModuleLocation","moduleName","createModuleConfig","platforms","dryRun","mainAppResult","configureMainApplication","_this$rollbackInfo","buildResult","configureBuildFiles","_this$rollbackInfo2","validationResult","validateIOSProject","podfileResult","configurePodfile","_this$rollbackInfo3","moduleFound","buildConfigValid","importTestPassed","registrationVerified","verifyModuleLinking","exports","linkReactNativeModule","orchestrator","rollbackLinking"],"sources":["orchestrator.ts"],"sourcesContent":["import * as fs from 'fs';\nimport { PathResolver, ModuleConfig, PathResolutionResult } from './path-resolver';\nimport { AndroidConfigManager } from './android-config';\nimport { IOSConfigManager } from './ios-config';\nimport { ModuleLinkingVerifier, VerificationResult } from './verification';\n\nexport interface LinkingOptions {\n  projectRoot: string;\n  moduleName?: string;\n  modulePath?: string;\n  platforms?: ('android' | 'ios')[];\n  dryRun?: boolean;\n  verbose?: boolean;\n  skipVerification?: boolean;\n  createBackups?: boolean;\n}\n\nexport interface LinkingResult {\n  success: boolean;\n  message: string;\n  details: LinkingDetails;\n  errors?: string[];\n  warnings?: string[];\n  modifiedFiles?: string[];\n  backupFiles?: string[];\n}\n\nexport interface LinkingDetails {\n  moduleResolved: boolean;\n  androidConfigured: boolean;\n  iosConfigured: boolean;\n  verificationPassed: boolean;\n  rollbackAvailable: boolean;\n}\n\nexport interface RollbackInfo {\n  backupFiles: Map<string, string>; // original file -> backup file\n  createdFiles: string[];\n  timestamp: Date;\n}\n\n/**\n * Logger class for consistent logging throughout the linking process\n */\nclass LinkingLogger {\n  private verbose: boolean = false;\n\n  public setVerbose(verbose: boolean): void {\n    this.verbose = verbose;\n  }\n\n  public info(message: string): void {\n    console.log(`[INFO] ${message}`);\n  }\n\n  public success(message: string): void {\n    console.log(`[SUCCESS] ${message}`);\n  }\n\n  public warn(message: string): void {\n    console.warn(`[WARN] ${message}`);\n  }\n\n  public error(message: string): void {\n    console.error(`[ERROR] ${message}`);\n  }\n\n  public debug(message: string): void {\n    if (this.verbose) {\n      console.log(`[DEBUG] ${message}`);\n    }\n  }\n}\n\nexport class ReactNativeModuleLinkingOrchestrator {\n  private pathResolver: PathResolver;\n  private androidManager: AndroidConfigManager;\n  private iosManager: IOSConfigManager;\n  private verifier: ModuleLinkingVerifier;\n  private logger: LinkingLogger;\n  private rollbackInfo: RollbackInfo | null = null;\n\n  constructor() {\n    this.pathResolver = new PathResolver();\n    this.androidManager = new AndroidConfigManager();\n    this.iosManager = new IOSConfigManager();\n    this.verifier = new ModuleLinkingVerifier();\n    this.logger = new LinkingLogger();\n  }\n\n  /**\n   * Main orchestration method that coordinates the entire linking process\n   */\n  public async linkModule(options: LinkingOptions): Promise<LinkingResult> {\n    const startTime = Date.now();\n    this.logger.setVerbose(options.verbose || false);\n    this.logger.info('Starting React Native module linking process...');\n    \n    // Initialize rollback tracking\n    this.rollbackInfo = {\n      backupFiles: new Map(),\n      createdFiles: [],\n      timestamp: new Date()\n    };\n\n    const errors: string[] = [];\n    const warnings: string[] = [];\n    const modifiedFiles: string[] = [];\n    const backupFiles: string[] = [];\n\n    try {\n      // Step 1: Resolve module path and configuration\n      this.logger.info('Step 1: Resolving module path and configuration...');\n      const moduleResolution = await this.resolveModuleConfiguration(options);\n      \n      if (!moduleResolution.success || !moduleResolution.moduleConfig) {\n        return this.createFailureResult(\n          'Module resolution failed',\n          moduleResolution.error ? [moduleResolution.error] : ['Unknown module resolution error'],\n          { moduleResolved: false, androidConfigured: false, iosConfigured: false, verificationPassed: false, rollbackAvailable: false }\n        );\n      }\n\n      this.logger.success(`Module resolved: ${moduleResolution.moduleConfig.name} at ${moduleResolution.moduleConfig.modulePath}`);\n      this.logger.info(`Supported platforms: ${moduleResolution.moduleConfig.platform}`);\n\n      // Step 2: Determine target platforms\n      const targetPlatforms = this.determinePlatforms(options, moduleResolution.moduleConfig);\n      this.logger.info(`Target platforms: ${targetPlatforms.join(', ')}`);\n\n      // Step 3: Configure Android (if requested and supported)\n      let androidConfigured = false;\n      if (targetPlatforms.includes('android') && moduleResolution.moduleConfig.platform !== 'ios') {\n        this.logger.info('Step 2a: Configuring Android platform...');\n        const androidResult = await this.configureAndroidPlatform(options, moduleResolution.moduleConfig);\n        \n        if (androidResult.success) {\n          androidConfigured = true;\n          if (androidResult.modifiedFiles) {\n            modifiedFiles.push(...androidResult.modifiedFiles);\n          }\n          if (androidResult.backupFiles) {\n            backupFiles.push(...androidResult.backupFiles);\n          }\n          this.logger.success('Android configuration completed successfully');\n        } else {\n          errors.push(...(androidResult.errors || [androidResult.message]));\n          this.logger.error(`Android configuration failed: ${androidResult.message}`);\n          \n          // If Android fails and it's the only platform, abort\n          if (targetPlatforms.length === 1) {\n            await this.performRollback();\n            return this.createFailureResult(\n              'Android configuration failed',\n              errors,\n              { moduleResolved: true, androidConfigured: false, iosConfigured: false, verificationPassed: false, rollbackAvailable: true }\n            );\n          }\n        }\n      }\n\n      // Step 4: Configure iOS (if requested and supported)\n      let iosConfigured = false;\n      if (targetPlatforms.includes('ios') && moduleResolution.moduleConfig.platform !== 'android') {\n        this.logger.info('Step 2b: Configuring iOS platform...');\n        const iosResult = await this.configureIOSPlatform(options, moduleResolution.moduleConfig);\n        \n        if (iosResult.success) {\n          iosConfigured = true;\n          if (iosResult.modifiedFiles) {\n            modifiedFiles.push(...iosResult.modifiedFiles);\n          }\n          if (iosResult.backupFiles) {\n            backupFiles.push(...iosResult.backupFiles);\n          }\n          this.logger.success('iOS configuration completed successfully');\n        } else {\n          errors.push(...(iosResult.errors || [iosResult.message]));\n          this.logger.error(`iOS configuration failed: ${iosResult.message}`);\n          \n          // If iOS fails and it's the only platform, abort\n          if (targetPlatforms.length === 1) {\n            await this.performRollback();\n            return this.createFailureResult(\n              'iOS configuration failed',\n              errors,\n              { moduleResolved: true, androidConfigured: androidConfigured, iosConfigured: false, verificationPassed: false, rollbackAvailable: true }\n            );\n          }\n        }\n      }\n\n      // Check if at least one platform was configured\n      if (!androidConfigured && !iosConfigured) {\n        await this.performRollback();\n        return this.createFailureResult(\n          'No platforms were successfully configured',\n          errors.length > 0 ? errors : ['No supported platforms found or all platform configurations failed'],\n          { moduleResolved: true, androidConfigured: false, iosConfigured: false, verificationPassed: false, rollbackAvailable: true }\n        );\n      }\n\n      // Step 5: Verification (if not skipped)\n      let verificationPassed = true;\n      if (!options.skipVerification) {\n        this.logger.info('Step 3: Verifying module linking...');\n        const verificationResult = await this.performVerification(options, moduleResolution.moduleConfig);\n        \n        if (verificationResult.success) {\n          this.logger.success('Module linking verification passed');\n        } else {\n          verificationPassed = false;\n          if (verificationResult.errors) {\n            errors.push(...verificationResult.errors);\n          }\n          if (verificationResult.warnings) {\n            warnings.push(...verificationResult.warnings);\n          }\n          this.logger.warn('Module linking verification failed, but configuration was applied');\n        }\n      }\n\n      // Step 6: Final summary\n      const duration = Date.now() - startTime;\n      this.logger.info(`Linking process completed in ${duration}ms`);\n      \n      if (modifiedFiles.length > 0) {\n        this.logger.info('Modified files:');\n        modifiedFiles.forEach(file => this.logger.info(`  - ${file}`));\n      }\n\n      if (backupFiles.length > 0) {\n        this.logger.info('Backup files created:');\n        backupFiles.forEach(file => this.logger.info(`  - ${file}`));\n      }\n\n      const overallSuccess = (androidConfigured || iosConfigured) && errors.length === 0;\n      \n      return {\n        success: overallSuccess,\n        message: overallSuccess \n          ? `Module linking completed successfully for ${targetPlatforms.filter((_, i) => i === 0 ? androidConfigured : iosConfigured).join(', ')}`\n          : 'Module linking completed with errors',\n        details: {\n          moduleResolved: true,\n          androidConfigured,\n          iosConfigured,\n          verificationPassed,\n          rollbackAvailable: this.rollbackInfo !== null\n        },\n        errors: errors.length > 0 ? errors : undefined,\n        warnings: warnings.length > 0 ? warnings : undefined,\n        modifiedFiles: modifiedFiles.length > 0 ? modifiedFiles : undefined,\n        backupFiles: backupFiles.length > 0 ? backupFiles : undefined\n      };\n\n    } catch (error) {\n      this.logger.error(`Unexpected error during linking process: ${error instanceof Error ? error.message : String(error)}`);\n      \n      // Attempt rollback on unexpected errors\n      await this.performRollback();\n      \n      return this.createFailureResult(\n        'Linking process failed with unexpected error',\n        [error instanceof Error ? error.message : String(error)],\n        { moduleResolved: false, androidConfigured: false, iosConfigured: false, verificationPassed: false, rollbackAvailable: true }\n      );\n    }\n  }\n\n  /**\n   * Performs rollback of all changes made during the linking process\n   */\n  public async performRollback(): Promise<{ success: boolean; message: string; errors?: string[] }> {\n    if (!this.rollbackInfo) {\n      return {\n        success: false,\n        message: 'No rollback information available'\n      };\n    }\n\n    this.logger.info('Performing rollback of changes...');\n    const errors: string[] = [];\n\n    try {\n      // Restore backed up files\n      this.rollbackInfo.backupFiles.forEach((backupFile, originalFile) => {\n        try {\n          if (fs.existsSync(backupFile)) {\n            fs.copyFileSync(backupFile, originalFile);\n            fs.unlinkSync(backupFile); // Clean up backup\n            this.logger.info(`Restored: ${originalFile}`);\n          }\n        } catch (error) {\n          const errorMsg = `Failed to restore ${originalFile}: ${error instanceof Error ? error.message : String(error)}`;\n          errors.push(errorMsg);\n          this.logger.error(errorMsg);\n        }\n      });\n\n      // Remove any files that were created during the process\n      for (const createdFile of this.rollbackInfo.createdFiles) {\n        try {\n          if (fs.existsSync(createdFile)) {\n            fs.unlinkSync(createdFile);\n            this.logger.info(`Removed: ${createdFile}`);\n          }\n        } catch (error) {\n          const errorMsg = `Failed to remove ${createdFile}: ${error instanceof Error ? error.message : String(error)}`;\n          errors.push(errorMsg);\n          this.logger.error(errorMsg);\n        }\n      }\n\n      // Clear rollback info\n      this.rollbackInfo = null;\n\n      if (errors.length === 0) {\n        this.logger.success('Rollback completed successfully');\n        return {\n          success: true,\n          message: 'All changes have been rolled back successfully'\n        };\n      } else {\n        return {\n          success: false,\n          message: 'Rollback completed with some errors',\n          errors\n        };\n      }\n\n    } catch (error) {\n      const errorMsg = `Rollback process failed: ${error instanceof Error ? error.message : String(error)}`;\n      this.logger.error(errorMsg);\n      return {\n        success: false,\n        message: errorMsg,\n        errors: [errorMsg]\n      };\n    }\n  }\n\n  /**\n   * Resolves module configuration from options\n   */\n  private async resolveModuleConfiguration(options: LinkingOptions): Promise<{\n    success: boolean;\n    moduleConfig?: ModuleConfig;\n    error?: string;\n  }> {\n    try {\n      let pathResult: PathResolutionResult;\n\n      if (options.modulePath) {\n        // Use provided module path\n        pathResult = this.pathResolver.resolveModulePath(options.projectRoot, options.modulePath);\n      } else {\n        // Auto-detect module location\n        pathResult = this.pathResolver.detectModuleLocation(options.projectRoot, options.moduleName);\n      }\n\n      if (!pathResult.success) {\n        return {\n          success: false,\n          error: pathResult.error\n        };\n      }\n\n      const moduleConfig = this.pathResolver.createModuleConfig(pathResult);\n      if (!moduleConfig) {\n        return {\n          success: false,\n          error: 'Failed to create module configuration from resolved path'\n        };\n      }\n\n      return {\n        success: true,\n        moduleConfig\n      };\n\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : String(error)\n      };\n    }\n  }\n\n  /**\n   * Determines which platforms to configure based on options and module support\n   */\n  private determinePlatforms(options: LinkingOptions, moduleConfig: ModuleConfig): ('android' | 'ios')[] {\n    if (options.platforms && options.platforms.length > 0) {\n      // Filter requested platforms by what the module supports\n      return options.platforms.filter(platform => {\n        if (moduleConfig.platform === 'both') return true;\n        return moduleConfig.platform === platform;\n      });\n    }\n\n    // Default to all supported platforms\n    if (moduleConfig.platform === 'both') {\n      return ['android', 'ios'];\n    } else {\n      return [moduleConfig.platform];\n    }\n  }\n\n  /**\n   * Configures Android platform\n   */\n  private async configureAndroidPlatform(options: LinkingOptions, moduleConfig: ModuleConfig): Promise<{\n    success: boolean;\n    message: string;\n    errors?: string[];\n    modifiedFiles?: string[];\n    backupFiles?: string[];\n  }> {\n    const errors: string[] = [];\n    const modifiedFiles: string[] = [];\n    const backupFiles: string[] = [];\n\n    try {\n      if (options.dryRun) {\n        this.logger.info('[DRY RUN] Would configure Android MainApplication and build files');\n        return {\n          success: true,\n          message: 'Android configuration (dry run)'\n        };\n      }\n\n      // Configure MainApplication\n      this.logger.info('Configuring MainApplication...');\n      const mainAppResult = this.androidManager.configureMainApplication(options.projectRoot, moduleConfig);\n      \n      if (!mainAppResult.success) {\n        errors.push(mainAppResult.error || mainAppResult.message);\n      } else {\n        if (mainAppResult.modifiedFiles) {\n          modifiedFiles.push(...mainAppResult.modifiedFiles);\n          // Track backups\n          mainAppResult.modifiedFiles.forEach(file => {\n            const backupFile = `${file}.backup`;\n            if (fs.existsSync(backupFile)) {\n              backupFiles.push(backupFile);\n              this.rollbackInfo?.backupFiles.set(file, backupFile);\n            }\n          });\n        }\n        this.logger.info('MainApplication configured successfully');\n      }\n\n      // Configure build files\n      this.logger.info('Configuring Android build files...');\n      const buildResult = this.androidManager.configureBuildFiles(options.projectRoot, moduleConfig);\n      \n      if (!buildResult.success) {\n        errors.push(buildResult.error || buildResult.message);\n      } else {\n        if (buildResult.modifiedFiles) {\n          modifiedFiles.push(...buildResult.modifiedFiles);\n          // Track backups\n          buildResult.modifiedFiles.forEach(file => {\n            const backupFile = `${file}.backup`;\n            if (fs.existsSync(backupFile)) {\n              backupFiles.push(backupFile);\n              this.rollbackInfo?.backupFiles.set(file, backupFile);\n            }\n          });\n        }\n        this.logger.info('Android build files configured successfully');\n      }\n\n      return {\n        success: errors.length === 0,\n        message: errors.length === 0 ? 'Android configuration completed' : 'Android configuration failed',\n        errors: errors.length > 0 ? errors : undefined,\n        modifiedFiles: modifiedFiles.length > 0 ? modifiedFiles : undefined,\n        backupFiles: backupFiles.length > 0 ? backupFiles : undefined\n      };\n\n    } catch (error) {\n      const errorMsg = `Android configuration error: ${error instanceof Error ? error.message : String(error)}`;\n      return {\n        success: false,\n        message: errorMsg,\n        errors: [errorMsg]\n      };\n    }\n  }\n\n  /**\n   * Configures iOS platform\n   */\n  private async configureIOSPlatform(options: LinkingOptions, moduleConfig: ModuleConfig): Promise<{\n    success: boolean;\n    message: string;\n    errors?: string[];\n    modifiedFiles?: string[];\n    backupFiles?: string[];\n  }> {\n    const errors: string[] = [];\n    const modifiedFiles: string[] = [];\n    const backupFiles: string[] = [];\n\n    try {\n      if (options.dryRun) {\n        this.logger.info('[DRY RUN] Would configure iOS Podfile');\n        return {\n          success: true,\n          message: 'iOS configuration (dry run)'\n        };\n      }\n\n      // Validate iOS project first\n      this.logger.info('Validating iOS project...');\n      const validationResult = this.iosManager.validateIOSProject(options.projectRoot);\n      \n      if (!validationResult.success) {\n        return {\n          success: false,\n          message: validationResult.message,\n          errors: [validationResult.error || validationResult.message]\n        };\n      }\n\n      // Configure Podfile\n      this.logger.info('Configuring Podfile...');\n      const podfileResult = this.iosManager.configurePodfile(options.projectRoot, moduleConfig);\n      \n      if (!podfileResult.success) {\n        errors.push(podfileResult.error || podfileResult.message);\n      } else {\n        if (podfileResult.modifiedFiles) {\n          modifiedFiles.push(...podfileResult.modifiedFiles);\n          // Track backups\n          podfileResult.modifiedFiles.forEach(file => {\n            const backupFile = `${file}.backup`;\n            if (fs.existsSync(backupFile)) {\n              backupFiles.push(backupFile);\n              this.rollbackInfo?.backupFiles.set(file, backupFile);\n            }\n          });\n        }\n        this.logger.info('Podfile configured successfully');\n        this.logger.info('Note: Run \"cd ios && pod install\" to install the pod dependencies');\n      }\n\n      return {\n        success: errors.length === 0,\n        message: errors.length === 0 ? 'iOS configuration completed' : 'iOS configuration failed',\n        errors: errors.length > 0 ? errors : undefined,\n        modifiedFiles: modifiedFiles.length > 0 ? modifiedFiles : undefined,\n        backupFiles: backupFiles.length > 0 ? backupFiles : undefined\n      };\n\n    } catch (error) {\n      const errorMsg = `iOS configuration error: ${error instanceof Error ? error.message : String(error)}`;\n      return {\n        success: false,\n        message: errorMsg,\n        errors: [errorMsg]\n      };\n    }\n  }\n\n  /**\n   * Performs verification of the linking configuration\n   */\n  private async performVerification(options: LinkingOptions, moduleConfig: ModuleConfig): Promise<VerificationResult> {\n    try {\n      if (options.dryRun) {\n        this.logger.info('[DRY RUN] Would verify module linking');\n        return {\n          success: true,\n          message: 'Verification (dry run)',\n          details: {\n            moduleFound: true,\n            androidConfigured: true,\n            iosConfigured: true,\n            buildConfigValid: true,\n            importTestPassed: true,\n            registrationVerified: true\n          }\n        };\n      }\n\n      return await this.verifier.verifyModuleLinking(options.projectRoot, moduleConfig.name);\n\n    } catch (error) {\n      return {\n        success: false,\n        message: `Verification failed: ${error instanceof Error ? error.message : String(error)}`,\n        details: {\n          moduleFound: false,\n          androidConfigured: false,\n          iosConfigured: false,\n          buildConfigValid: false,\n          importTestPassed: false,\n          registrationVerified: false\n        },\n        errors: [error instanceof Error ? error.message : String(error)]\n      };\n    }\n  }\n\n  /**\n   * Creates a standardized failure result\n   */\n  private createFailureResult(message: string, errors: string[], details: LinkingDetails): LinkingResult {\n    return {\n      success: false,\n      message,\n      details,\n      errors\n    };\n  }\n}\n\n/**\n * Convenience function to link a module with default options\n */\nexport async function linkReactNativeModule(\n  projectRoot: string,\n  options: Partial<LinkingOptions> = {}\n): Promise<LinkingResult> {\n  const orchestrator = new ReactNativeModuleLinkingOrchestrator();\n  return orchestrator.linkModule({\n    projectRoot,\n    ...options\n  });\n}\n\n/**\n * Convenience function to perform rollback\n */\nexport async function rollbackLinking(): Promise<{ success: boolean; message: string; errors?: string[] }> {\n  const orchestrator = new ReactNativeModuleLinkingOrchestrator();\n  return orchestrator.performRollback();\n}"],"mappings":"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","ignoreList":[]}
{"version":3,"names":["fs","_interopRequireWildcard","require","_pathResolver","_androidConfig","_iosConfig","_verification","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_defineProperty","_toPropertyKey","value","enumerable","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","LinkingLogger","constructor","setVerbose","verbose","info","message","console","log","success","warn","error","debug","ReactNativeModuleLinkingOrchestrator","pathResolver","PathResolver","androidManager","AndroidConfigManager","iosManager","IOSConfigManager","verifier","ModuleLinkingVerifier","logger","linkModule","options","startTime","Date","now","rollbackInfo","backupFiles","Map","createdFiles","timestamp","errors","warnings","modifiedFiles","moduleResolution","resolveModuleConfiguration","moduleConfig","createFailureResult","moduleResolved","androidConfigured","iosConfigured","verificationPassed","rollbackAvailable","name","modulePath","platform","targetPlatforms","determinePlatforms","join","includes","androidResult","configureAndroidPlatform","push","length","performRollback","iosResult","configureIOSPlatform","skipVerification","verificationResult","performVerification","duration","forEach","file","overallSuccess","filter","_","details","undefined","Error","backupFile","originalFile","existsSync","copyFileSync","unlinkSync","errorMsg","createdFile","pathResult","resolveModulePath","projectRoot","detectModuleLocation","moduleName","createModuleConfig","platforms","dryRun","mainAppResult","configureMainApplication","_this$rollbackInfo","buildResult","configureBuildFiles","_this$rollbackInfo2","validationResult","validateIOSProject","podfileResult","configurePodfile","_this$rollbackInfo3","moduleFound","buildConfigValid","importTestPassed","registrationVerified","verifyModuleLinking","exports","linkReactNativeModule","orchestrator","rollbackLinking"],"sources":["orchestrator.js"],"sourcesContent":["import * as fs from 'fs';\nimport { PathResolver } from './path-resolver';\nimport { AndroidConfigManager } from './android-config';\nimport { IOSConfigManager } from './ios-config';\nimport { ModuleLinkingVerifier } from './verification';\n/**\n * Logger class for consistent logging throughout the linking process\n */\nclass LinkingLogger {\n    verbose = false;\n    setVerbose(verbose) {\n        this.verbose = verbose;\n    }\n    info(message) {\n        console.log(`[INFO] ${message}`);\n    }\n    success(message) {\n        console.log(`[SUCCESS] ${message}`);\n    }\n    warn(message) {\n        console.warn(`[WARN] ${message}`);\n    }\n    error(message) {\n        console.error(`[ERROR] ${message}`);\n    }\n    debug(message) {\n        if (this.verbose) {\n            console.log(`[DEBUG] ${message}`);\n        }\n    }\n}\nexport class ReactNativeModuleLinkingOrchestrator {\n    pathResolver;\n    androidManager;\n    iosManager;\n    verifier;\n    logger;\n    rollbackInfo = null;\n    constructor() {\n        this.pathResolver = new PathResolver();\n        this.androidManager = new AndroidConfigManager();\n        this.iosManager = new IOSConfigManager();\n        this.verifier = new ModuleLinkingVerifier();\n        this.logger = new LinkingLogger();\n    }\n    /**\n     * Main orchestration method that coordinates the entire linking process\n     */\n    async linkModule(options) {\n        const startTime = Date.now();\n        this.logger.setVerbose(options.verbose || false);\n        this.logger.info('Starting React Native module linking process...');\n        // Initialize rollback tracking\n        this.rollbackInfo = {\n            backupFiles: new Map(),\n            createdFiles: [],\n            timestamp: new Date()\n        };\n        const errors = [];\n        const warnings = [];\n        const modifiedFiles = [];\n        const backupFiles = [];\n        try {\n            // Step 1: Resolve module path and configuration\n            this.logger.info('Step 1: Resolving module path and configuration...');\n            const moduleResolution = await this.resolveModuleConfiguration(options);\n            if (!moduleResolution.success || !moduleResolution.moduleConfig) {\n                return this.createFailureResult('Module resolution failed', moduleResolution.error ? [moduleResolution.error] : ['Unknown module resolution error'], { moduleResolved: false, androidConfigured: false, iosConfigured: false, verificationPassed: false, rollbackAvailable: false });\n            }\n            this.logger.success(`Module resolved: ${moduleResolution.moduleConfig.name} at ${moduleResolution.moduleConfig.modulePath}`);\n            this.logger.info(`Supported platforms: ${moduleResolution.moduleConfig.platform}`);\n            // Step 2: Determine target platforms\n            const targetPlatforms = this.determinePlatforms(options, moduleResolution.moduleConfig);\n            this.logger.info(`Target platforms: ${targetPlatforms.join(', ')}`);\n            // Step 3: Configure Android (if requested and supported)\n            let androidConfigured = false;\n            if (targetPlatforms.includes('android') && moduleResolution.moduleConfig.platform !== 'ios') {\n                this.logger.info('Step 2a: Configuring Android platform...');\n                const androidResult = await this.configureAndroidPlatform(options, moduleResolution.moduleConfig);\n                if (androidResult.success) {\n                    androidConfigured = true;\n                    if (androidResult.modifiedFiles) {\n                        modifiedFiles.push(...androidResult.modifiedFiles);\n                    }\n                    if (androidResult.backupFiles) {\n                        backupFiles.push(...androidResult.backupFiles);\n                    }\n                    this.logger.success('Android configuration completed successfully');\n                }\n                else {\n                    errors.push(...(androidResult.errors || [androidResult.message]));\n                    this.logger.error(`Android configuration failed: ${androidResult.message}`);\n                    // If Android fails and it's the only platform, abort\n                    if (targetPlatforms.length === 1) {\n                        await this.performRollback();\n                        return this.createFailureResult('Android configuration failed', errors, { moduleResolved: true, androidConfigured: false, iosConfigured: false, verificationPassed: false, rollbackAvailable: true });\n                    }\n                }\n            }\n            // Step 4: Configure iOS (if requested and supported)\n            let iosConfigured = false;\n            if (targetPlatforms.includes('ios') && moduleResolution.moduleConfig.platform !== 'android') {\n                this.logger.info('Step 2b: Configuring iOS platform...');\n                const iosResult = await this.configureIOSPlatform(options, moduleResolution.moduleConfig);\n                if (iosResult.success) {\n                    iosConfigured = true;\n                    if (iosResult.modifiedFiles) {\n                        modifiedFiles.push(...iosResult.modifiedFiles);\n                    }\n                    if (iosResult.backupFiles) {\n                        backupFiles.push(...iosResult.backupFiles);\n                    }\n                    this.logger.success('iOS configuration completed successfully');\n                }\n                else {\n                    errors.push(...(iosResult.errors || [iosResult.message]));\n                    this.logger.error(`iOS configuration failed: ${iosResult.message}`);\n                    // If iOS fails and it's the only platform, abort\n                    if (targetPlatforms.length === 1) {\n                        await this.performRollback();\n                        return this.createFailureResult('iOS configuration failed', errors, { moduleResolved: true, androidConfigured: androidConfigured, iosConfigured: false, verificationPassed: false, rollbackAvailable: true });\n                    }\n                }\n            }\n            // Check if at least one platform was configured\n            if (!androidConfigured && !iosConfigured) {\n                await this.performRollback();\n                return this.createFailureResult('No platforms were successfully configured', errors.length > 0 ? errors : ['No supported platforms found or all platform configurations failed'], { moduleResolved: true, androidConfigured: false, iosConfigured: false, verificationPassed: false, rollbackAvailable: true });\n            }\n            // Step 5: Verification (if not skipped)\n            let verificationPassed = true;\n            if (!options.skipVerification) {\n                this.logger.info('Step 3: Verifying module linking...');\n                const verificationResult = await this.performVerification(options, moduleResolution.moduleConfig);\n                if (verificationResult.success) {\n                    this.logger.success('Module linking verification passed');\n                }\n                else {\n                    verificationPassed = false;\n                    if (verificationResult.errors) {\n                        errors.push(...verificationResult.errors);\n                    }\n                    if (verificationResult.warnings) {\n                        warnings.push(...verificationResult.warnings);\n                    }\n                    this.logger.warn('Module linking verification failed, but configuration was applied');\n                }\n            }\n            // Step 6: Final summary\n            const duration = Date.now() - startTime;\n            this.logger.info(`Linking process completed in ${duration}ms`);\n            if (modifiedFiles.length > 0) {\n                this.logger.info('Modified files:');\n                modifiedFiles.forEach(file => this.logger.info(`  - ${file}`));\n            }\n            if (backupFiles.length > 0) {\n                this.logger.info('Backup files created:');\n                backupFiles.forEach(file => this.logger.info(`  - ${file}`));\n            }\n            const overallSuccess = (androidConfigured || iosConfigured) && errors.length === 0;\n            return {\n                success: overallSuccess,\n                message: overallSuccess\n                    ? `Module linking completed successfully for ${targetPlatforms.filter((_, i) => i === 0 ? androidConfigured : iosConfigured).join(', ')}`\n                    : 'Module linking completed with errors',\n                details: {\n                    moduleResolved: true,\n                    androidConfigured,\n                    iosConfigured,\n                    verificationPassed,\n                    rollbackAvailable: this.rollbackInfo !== null\n                },\n                errors: errors.length > 0 ? errors : undefined,\n                warnings: warnings.length > 0 ? warnings : undefined,\n                modifiedFiles: modifiedFiles.length > 0 ? modifiedFiles : undefined,\n                backupFiles: backupFiles.length > 0 ? backupFiles : undefined\n            };\n        }\n        catch (error) {\n            this.logger.error(`Unexpected error during linking process: ${error instanceof Error ? error.message : String(error)}`);\n            // Attempt rollback on unexpected errors\n            await this.performRollback();\n            return this.createFailureResult('Linking process failed with unexpected error', [error instanceof Error ? error.message : String(error)], { moduleResolved: false, androidConfigured: false, iosConfigured: false, verificationPassed: false, rollbackAvailable: true });\n        }\n    }\n    /**\n     * Performs rollback of all changes made during the linking process\n     */\n    async performRollback() {\n        if (!this.rollbackInfo) {\n            return {\n                success: false,\n                message: 'No rollback information available'\n            };\n        }\n        this.logger.info('Performing rollback of changes...');\n        const errors = [];\n        try {\n            // Restore backed up files\n            this.rollbackInfo.backupFiles.forEach((backupFile, originalFile) => {\n                try {\n                    if (fs.existsSync(backupFile)) {\n                        fs.copyFileSync(backupFile, originalFile);\n                        fs.unlinkSync(backupFile); // Clean up backup\n                        this.logger.info(`Restored: ${originalFile}`);\n                    }\n                }\n                catch (error) {\n                    const errorMsg = `Failed to restore ${originalFile}: ${error instanceof Error ? error.message : String(error)}`;\n                    errors.push(errorMsg);\n                    this.logger.error(errorMsg);\n                }\n            });\n            // Remove any files that were created during the process\n            for (const createdFile of this.rollbackInfo.createdFiles) {\n                try {\n                    if (fs.existsSync(createdFile)) {\n                        fs.unlinkSync(createdFile);\n                        this.logger.info(`Removed: ${createdFile}`);\n                    }\n                }\n                catch (error) {\n                    const errorMsg = `Failed to remove ${createdFile}: ${error instanceof Error ? error.message : String(error)}`;\n                    errors.push(errorMsg);\n                    this.logger.error(errorMsg);\n                }\n            }\n            // Clear rollback info\n            this.rollbackInfo = null;\n            if (errors.length === 0) {\n                this.logger.success('Rollback completed successfully');\n                return {\n                    success: true,\n                    message: 'All changes have been rolled back successfully'\n                };\n            }\n            else {\n                return {\n                    success: false,\n                    message: 'Rollback completed with some errors',\n                    errors\n                };\n            }\n        }\n        catch (error) {\n            const errorMsg = `Rollback process failed: ${error instanceof Error ? error.message : String(error)}`;\n            this.logger.error(errorMsg);\n            return {\n                success: false,\n                message: errorMsg,\n                errors: [errorMsg]\n            };\n        }\n    }\n    /**\n     * Resolves module configuration from options\n     */\n    async resolveModuleConfiguration(options) {\n        try {\n            let pathResult;\n            if (options.modulePath) {\n                // Use provided module path\n                pathResult = this.pathResolver.resolveModulePath(options.projectRoot, options.modulePath);\n            }\n            else {\n                // Auto-detect module location\n                pathResult = this.pathResolver.detectModuleLocation(options.projectRoot, options.moduleName);\n            }\n            if (!pathResult.success) {\n                return {\n                    success: false,\n                    error: pathResult.error\n                };\n            }\n            const moduleConfig = this.pathResolver.createModuleConfig(pathResult);\n            if (!moduleConfig) {\n                return {\n                    success: false,\n                    error: 'Failed to create module configuration from resolved path'\n                };\n            }\n            return {\n                success: true,\n                moduleConfig\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : String(error)\n            };\n        }\n    }\n    /**\n     * Determines which platforms to configure based on options and module support\n     */\n    determinePlatforms(options, moduleConfig) {\n        if (options.platforms && options.platforms.length > 0) {\n            // Filter requested platforms by what the module supports\n            return options.platforms.filter(platform => {\n                if (moduleConfig.platform === 'both')\n                    return true;\n                return moduleConfig.platform === platform;\n            });\n        }\n        // Default to all supported platforms\n        if (moduleConfig.platform === 'both') {\n            return ['android', 'ios'];\n        }\n        else {\n            return [moduleConfig.platform];\n        }\n    }\n    /**\n     * Configures Android platform\n     */\n    async configureAndroidPlatform(options, moduleConfig) {\n        const errors = [];\n        const modifiedFiles = [];\n        const backupFiles = [];\n        try {\n            if (options.dryRun) {\n                this.logger.info('[DRY RUN] Would configure Android MainApplication and build files');\n                return {\n                    success: true,\n                    message: 'Android configuration (dry run)'\n                };\n            }\n            // Configure MainApplication\n            this.logger.info('Configuring MainApplication...');\n            const mainAppResult = this.androidManager.configureMainApplication(options.projectRoot, moduleConfig);\n            if (!mainAppResult.success) {\n                errors.push(mainAppResult.error || mainAppResult.message);\n            }\n            else {\n                if (mainAppResult.modifiedFiles) {\n                    modifiedFiles.push(...mainAppResult.modifiedFiles);\n                    // Track backups\n                    mainAppResult.modifiedFiles.forEach(file => {\n                        const backupFile = `${file}.backup`;\n                        if (fs.existsSync(backupFile)) {\n                            backupFiles.push(backupFile);\n                            this.rollbackInfo?.backupFiles.set(file, backupFile);\n                        }\n                    });\n                }\n                this.logger.info('MainApplication configured successfully');\n            }\n            // Configure build files\n            this.logger.info('Configuring Android build files...');\n            const buildResult = this.androidManager.configureBuildFiles(options.projectRoot, moduleConfig);\n            if (!buildResult.success) {\n                errors.push(buildResult.error || buildResult.message);\n            }\n            else {\n                if (buildResult.modifiedFiles) {\n                    modifiedFiles.push(...buildResult.modifiedFiles);\n                    // Track backups\n                    buildResult.modifiedFiles.forEach(file => {\n                        const backupFile = `${file}.backup`;\n                        if (fs.existsSync(backupFile)) {\n                            backupFiles.push(backupFile);\n                            this.rollbackInfo?.backupFiles.set(file, backupFile);\n                        }\n                    });\n                }\n                this.logger.info('Android build files configured successfully');\n            }\n            return {\n                success: errors.length === 0,\n                message: errors.length === 0 ? 'Android configuration completed' : 'Android configuration failed',\n                errors: errors.length > 0 ? errors : undefined,\n                modifiedFiles: modifiedFiles.length > 0 ? modifiedFiles : undefined,\n                backupFiles: backupFiles.length > 0 ? backupFiles : undefined\n            };\n        }\n        catch (error) {\n            const errorMsg = `Android configuration error: ${error instanceof Error ? error.message : String(error)}`;\n            return {\n                success: false,\n                message: errorMsg,\n                errors: [errorMsg]\n            };\n        }\n    }\n    /**\n     * Configures iOS platform\n     */\n    async configureIOSPlatform(options, moduleConfig) {\n        const errors = [];\n        const modifiedFiles = [];\n        const backupFiles = [];\n        try {\n            if (options.dryRun) {\n                this.logger.info('[DRY RUN] Would configure iOS Podfile');\n                return {\n                    success: true,\n                    message: 'iOS configuration (dry run)'\n                };\n            }\n            // Validate iOS project first\n            this.logger.info('Validating iOS project...');\n            const validationResult = this.iosManager.validateIOSProject(options.projectRoot);\n            if (!validationResult.success) {\n                return {\n                    success: false,\n                    message: validationResult.message,\n                    errors: [validationResult.error || validationResult.message]\n                };\n            }\n            // Configure Podfile\n            this.logger.info('Configuring Podfile...');\n            const podfileResult = this.iosManager.configurePodfile(options.projectRoot, moduleConfig);\n            if (!podfileResult.success) {\n                errors.push(podfileResult.error || podfileResult.message);\n            }\n            else {\n                if (podfileResult.modifiedFiles) {\n                    modifiedFiles.push(...podfileResult.modifiedFiles);\n                    // Track backups\n                    podfileResult.modifiedFiles.forEach(file => {\n                        const backupFile = `${file}.backup`;\n                        if (fs.existsSync(backupFile)) {\n                            backupFiles.push(backupFile);\n                            this.rollbackInfo?.backupFiles.set(file, backupFile);\n                        }\n                    });\n                }\n                this.logger.info('Podfile configured successfully');\n                this.logger.info('Note: Run \"cd ios && pod install\" to install the pod dependencies');\n            }\n            return {\n                success: errors.length === 0,\n                message: errors.length === 0 ? 'iOS configuration completed' : 'iOS configuration failed',\n                errors: errors.length > 0 ? errors : undefined,\n                modifiedFiles: modifiedFiles.length > 0 ? modifiedFiles : undefined,\n                backupFiles: backupFiles.length > 0 ? backupFiles : undefined\n            };\n        }\n        catch (error) {\n            const errorMsg = `iOS configuration error: ${error instanceof Error ? error.message : String(error)}`;\n            return {\n                success: false,\n                message: errorMsg,\n                errors: [errorMsg]\n            };\n        }\n    }\n    /**\n     * Performs verification of the linking configuration\n     */\n    async performVerification(options, moduleConfig) {\n        try {\n            if (options.dryRun) {\n                this.logger.info('[DRY RUN] Would verify module linking');\n                return {\n                    success: true,\n                    message: 'Verification (dry run)',\n                    details: {\n                        moduleFound: true,\n                        androidConfigured: true,\n                        iosConfigured: true,\n                        buildConfigValid: true,\n                        importTestPassed: true,\n                        registrationVerified: true\n                    }\n                };\n            }\n            return await this.verifier.verifyModuleLinking(options.projectRoot, moduleConfig.name);\n        }\n        catch (error) {\n            return {\n                success: false,\n                message: `Verification failed: ${error instanceof Error ? error.message : String(error)}`,\n                details: {\n                    moduleFound: false,\n                    androidConfigured: false,\n                    iosConfigured: false,\n                    buildConfigValid: false,\n                    importTestPassed: false,\n                    registrationVerified: false\n                },\n                errors: [error instanceof Error ? error.message : String(error)]\n            };\n        }\n    }\n    /**\n     * Creates a standardized failure result\n     */\n    createFailureResult(message, errors, details) {\n        return {\n            success: false,\n            message,\n            details,\n            errors\n        };\n    }\n}\n/**\n * Convenience function to link a module with default options\n */\nexport async function linkReactNativeModule(projectRoot, options = {}) {\n    const orchestrator = new ReactNativeModuleLinkingOrchestrator();\n    return orchestrator.linkModule({\n        projectRoot,\n        ...options\n    });\n}\n/**\n * Convenience function to perform rollback\n */\nexport async function rollbackLinking() {\n    const orchestrator = new ReactNativeModuleLinkingOrchestrator();\n    return orchestrator.performRollback();\n}\n"],"mappings":"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","ignoreList":[]}